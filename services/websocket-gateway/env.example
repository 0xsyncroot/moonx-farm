# =============================================================================
# WEBSOCKET GATEWAY - ENVIRONMENT CONFIGURATION
# =============================================================================
# Based on actual code analysis: @moonx-farm/configs + custom WebSocket config
# Port: 3011 | Framework: Fastify + Socket.IO | Cache: Redis | Events: Kafka
# =============================================================================

# =============================================================================
# BASE CONFIGURATION (BaseConfigSchema from @moonx-farm/configs)
# =============================================================================
NODE_ENV=development
LOG_LEVEL=info
APP_NAME=moonx-farm
APP_VERSION=1.0.0

# =============================================================================
# WEBSOCKET GATEWAY SERVER (ServicesConfigSchema from @moonx-farm/configs)
# =============================================================================
WEBSOCKET_GATEWAY_HOST=localhost
WEBSOCKET_GATEWAY_PORT=3011

# Auth Service Integration
AUTH_SERVICE_URL=http://localhost:3001
AUTH_TIMEOUT=5000

# =============================================================================
# REDIS CONFIGURATION (RedisConfigSchema from @moonx-farm/configs)
# =============================================================================
# Required for: Socket.IO adapter, connection clustering, load balancing
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_KEY_PREFIX=moonx:
REDIS_ENABLE_READY_CHECK=true
REDIS_LAZY_CONNECT=false
REDIS_MAX_RETRIES_PER_REQUEST=3
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000

# =============================================================================
# LOGGING CONFIGURATION (LoggerConfigSchema from @moonx-farm/configs)
# =============================================================================
LOG_ENABLE_CONSOLE=true
LOG_ENABLE_FILE=false
LOG_DIR=logs
LOG_MAX_FILES=5
LOG_MAX_SIZE=10m
LOG_FORMAT=console

# =============================================================================
# WEBSOCKET & SOCKET.IO CONFIGURATION
# =============================================================================
# Connection limits
MAX_CONNECTIONS=10000
CONNECTION_TIMEOUT=30000

# Performance settings
ENABLE_COMPRESSION=false
ENABLE_HEARTBEAT=true
HEARTBEAT_INTERVAL=25000
HEARTBEAT_TIMEOUT=5000

# Socket.IO settings
PING_TIMEOUT=60000
PING_INTERVAL=25000
MAX_HTTP_BUFFER_SIZE=1000000
MAX_DISCONNECTION_DURATION=180000
TRANSPORTS=websocket,polling

# =============================================================================
# CORS & SECURITY CONFIGURATION
# =============================================================================
CORS_ORIGINS=*
CORS_METHODS=GET,POST
CORS_CREDENTIALS=true

# =============================================================================
# KAFKA CONFIGURATION (Event Streaming)
# =============================================================================
# Required for: Real-time event streaming from other services
KAFKA_BROKERS=localhost:9092
KAFKA_CLIENT_ID=websocket-gateway
KAFKA_GROUP_ID=websocket-gateway-group
KAFKA_TOPICS=price.updates,order.book.updates,trade.notifications,portfolio.updates,system.alerts
KAFKA_SESSION_TIMEOUT=10000
KAFKA_HEARTBEAT_INTERVAL=3000
KAFKA_MAX_BYTES_PER_PARTITION=1048576

# =============================================================================
# PRODUCTION SETTINGS
# =============================================================================
# Uncomment and modify for production deployment:

# NODE_ENV=production
# LOG_LEVEL=warn
# LOG_FORMAT=json
# LOG_ENABLE_FILE=true
# WEBSOCKET_GATEWAY_HOST=0.0.0.0
# MAX_CONNECTIONS=1000000
# ENABLE_COMPRESSION=true
# TRANSPORTS=websocket
# CORS_ORIGINS=https://app.moonx.farm,https://trade.moonx.farm
# AUTH_SERVICE_URL=https://auth.moonx.farm
# REDIS_HOST=redis-cluster.moonx.farm
# REDIS_PASSWORD=your-redis-password
# REDIS_KEY_PREFIX=moonx:wsg:
# KAFKA_BROKERS=kafka-1:9092,kafka-2:9092,kafka-3:9092
# KAFKA_CLIENT_ID=websocket-gateway-prod
# KAFKA_GROUP_ID=websocket-gateway-group-prod

# =============================================================================
# DEVELOPMENT NOTES
# =============================================================================
# 1. AUTH_SERVICE_URL: Must point to running auth-service instance
# 2. REDIS: Required for Socket.IO clustering and load balancing
# 3. KAFKA: Required for receiving events from other services
# 4. KAFKA_TOPICS: Must match topics published by other services
# 5. For development: Ensure auth-service, redis, and kafka are running
# 6. For production: Use clustered Redis and Kafka for high availability 